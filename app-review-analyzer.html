<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Review Analyzer | Sentiment & Keywords</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #003370;
            --secondary: #ff6536;
            --dark-blue: #002550;
            --light-blue: #eef6ff;
            --text-dark: #212529;
            --text-light: #6c757d;
            --white: #ffffff;
            --light-gray: #f8f9fa;
            --border-gray: #e9ecef;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gradient-bg: linear-gradient(135deg, #003370 0%, #002550 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: #f5f8fb;
            padding: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header-area {
            background: var(--gradient-bg);
            color: white;
            padding: 60px 0 80px;
            position: relative;
            overflow: hidden;
            margin-bottom: 0;
        }
        
        .header-area::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 40%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='rgba(255,255,255,0.1)' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.1;
            z-index: 0;
        }
        
        .header {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        
        .header h1 {
            font-weight: 700;
            font-size: 36px;
            margin-bottom: 15px;
            letter-spacing: -0.5px;
        }
        
        .header p {
            font-size: 18px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .main-content {
            margin-top: -50px;
            position: relative;
            z-index: 10;
            padding-bottom: 60px;
        }
        
        .analyzer-container {
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 35, 80, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }
        
        .analyzer-container:hover {
            box-shadow: 0 15px 35px rgba(0, 35, 80, 0.15);
            transform: translateY(-5px);
        }
        
        .section-title {
            position: relative;
            display: inline-block;
            margin-bottom: 30px;
            color: var(--primary);
            font-weight: 700;
            font-size: 24px;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -10px;
            width: 50px;
            height: 3px;
            background-color: var(--secondary);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 30px;
            background-color: var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border-gray);
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            color: var(--text-dark);
        }
        
        .tab.active {
            background-color: var(--white);
            color: var(--primary);
        }
        
        .tab.active::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 3px;
            background-color: var(--secondary);
        }
        
        .tab:hover:not(.active) {
            background-color: rgba(255, 255, 255, 0.5);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .tab-description {
            color: var(--text-light);
            margin-bottom: 25px;
            font-size: 15px;
        }
        
        .input-group {
            margin-bottom: 24px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
            font-size: 15px;
        }
        
        input, select {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
            background-color: var(--white);
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(255, 101, 54, 0.2);
        }
        
        button {
            background-color: var(--secondary);
            color: var(--white);
            border: none;
            padding: 14px 20px;
            width: 100%;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            background-color: #e55a2f;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 101, 54, 0.3);
        }
        
        button:disabled {
            background-color: var(--light-gray);
            color: var(--text-light);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        button:disabled::before {
            display: none;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px;
        }
        
        .col {
            flex: 1;
            padding: 0 15px;
            min-width: 300px;
        }
        
        .upload-container {
            border: 2px dashed var(--border-gray);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
            transition: all 0.3s ease;
            background-color: var(--light-gray);
            position: relative;
            overflow: hidden;
        }
        
        .upload-container:hover {
            border-color: var(--secondary);
            background-color: rgba(255, 101, 54, 0.05);
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 15px;
            display: inline-block;
            width: 80px;
            height: 80px;
            line-height: 80px;
            border-radius: 50%;
            background-color: var(--light-blue);
            transition: all 0.3s ease;
        }
        
        .upload-container:hover .upload-icon {
            transform: scale(1.1);
            background-color: rgba(255, 101, 54, 0.1);
        }
        
        .upload-text {
            margin-bottom: 20px;
            color: var(--text-dark);
            font-weight: 600;
        }
        
        .upload-description {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .file-input {
            display: none;
        }
        
        .upload-button {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 35, 80, 0.1);
        }
        
        .upload-button:hover {
            background-color: var(--dark-blue);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 35, 80, 0.15);
        }
        
        .file-info {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .progress-container {
            margin-top: 20px;
            display: none;
        }
        
        progress {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            border: none;
            background-color: var(--light-gray);
        }
        
        progress::-webkit-progress-bar {
            background-color: var(--light-gray);
            border-radius: 4px;
        }
        
        progress::-webkit-progress-value {
            background-color: var(--secondary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        progress::-moz-progress-bar {
            background-color: var(--secondary);
            border-radius: 4px;
        }
        
        .results-container {
            display: none;
            margin-top: 40px;
            animation: fadeIn 0.5s ease;
        }
        
        .store-results {
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 35, 80, 0.1);
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .store-results:hover {
            box-shadow: 0 15px 35px rgba(0, 35, 80, 0.15);
            transform: translateY(-5px);
        }
        
        .store-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .store-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background-size: 30px;
            background-position: center;
            background-repeat: no-repeat;
            margin-right: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }
        
        .google-play-icon {
            background-color: white;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M325.3 234.3L104.6 13l280.8 161.2-60.1 60.1zM47 0C34 6.8 25.3 19.2 25.3 35.3v441.3c0 16.1 8.7 28.5 21.7 35.3l256.6-256L47 0zm425.2 225.6l-58.9-34.1-65.7 64.5 65.7 64.5 60.1-34.1c18-14.3 18-46.5-1.2-60.8zM104.6 499l280.8-161.2-60.1-60.1L104.6 499z" fill="%234285F4"/></svg>');
        }
        
        .app-store-icon {
            background-color: white;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z" fill="%23007AFF"/></svg>');
        }
        
        .store-results::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 30%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='rgba(0,51,112,0.05)' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3C/svg%3E");
            opacity: 1;
            z-index: 0;
        }
        
        .sentiment-box {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .sentiment-card {
            flex: 1;
            min-width: 150px;
            padding: 25px 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .sentiment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .sentiment-card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: inherit;
            filter: blur(10px);
            opacity: 0.2;
            z-index: -1;
        }
        
        .sentiment-title {
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .sentiment-value {
            font-size: 28px;
            font-weight: 700;
        }
        
        .positive-sentiment {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
        }
        
        .neutral-sentiment {
            background-color: rgba(108, 117, 125, 0.1);
            color: var(--text-light);
        }
        
        .negative-sentiment {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }
        
        .average-rating {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--warning);
        }
        
        .keywords-container {
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }
        
        .keyword-title {
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 18px;
            position: relative;
            display: inline-block;
        }
        
        .keyword-title::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -5px;
            width: 30px;
            height: 2px;
            background-color: var(--secondary);
        }
        
        .keywords-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .keyword-tag {
            background-color: var(--light-blue);
            color: var(--primary);
            padding: 10px 15px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 51, 112, 0.1);
            transition: all 0.3s ease;
        }
        
        .keyword-tag:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 51, 112, 0.15);
        }
        
        .keyword-count {
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            margin-left: 8px;
            font-weight: 700;
        }
        
        .review-sample {
            margin-top: 40px;
            border-top: 1px solid var(--border-gray);
            padding-top: 30px;
            position: relative;
            z-index: 1;
        }
        
        .review-title {
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--primary);
            font-size: 18px;
            position: relative;
            display: inline-block;
        }
        
        .review-title::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -5px;
            width: 30px;
            height: 2px;
            background-color: var(--secondary);
        }
        
        .review-card {
            background-color: var(--light-gray);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
        }
        
        .review-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07);
        }
        
        .review-positive {
            border-left-color: var(--success);
        }
        
        .review-neutral {
            border-left-color: var(--text-light);
        }
        
        .review-negative {
            border-left-color: var(--danger);
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .reviewer-name {
            font-weight: 600;
            color: var(--primary);
        }
        
        .review-date {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .review-rating {
            color: var(--warning);
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .review-text {
            font-size: 15px;
            line-height: 1.6;
            color: var(--text-dark);
        }
        
        .error-message {
            color: var(--danger);
            margin-top: 5px;
            font-size: 14px;
            display: none;
        }
        
        .back-link {
            color: var(--primary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            margin-top: 30px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            color: var(--secondary);
        }
        
        .back-link svg {
            margin-right: 8px;
        }
        
        .footer {
            background-color: var(--dark-blue);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .footer-content {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .footer-logo {
            font-weight: 700;
            font-size: 24px;
            margin-bottom: 15px;
            color: white;
        }
        
        .footer-text {
            opacity: 0.8;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            background-color: var(--secondary);
            transform: translateY(-3px);
        }
        
        .copyright {
            opacity: 0.6;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 28px;
            }
            
            .header p {
                font-size: 16px;
            }
            
            .row {
                flex-direction: column;
            }
            
            .sentiment-box {
                flex-direction: column;
            }
            
            .sentiment-card {
                margin: 0 0 15px 0;
            }
            
            .analyzer-container, .store-results {
                padding: 20px;
            }
            
            .section-title, .tab-title {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header-area">
        <div class="container">
            <div class="header">
                <h1>App Review Analyzer</h1>
                <p>Extract valuable insights from customer reviews with our powerful sentiment analysis and keyword extraction tool</p>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <div class="container">
            <div class="analyzer-container">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('playStore')">Google Play Store</div>
                    <div class="tab" onclick="switchTab('appStore')">App Store</div>
                </div>
                
                <!-- Play Store Tab Content -->
                <div id="playStore" class="tab-content active">
                    <div class="tab-title">Analyze Play Store Reviews</div>
                    <p class="tab-description">Export your reviews CSV from Google Play Console and upload it here for detailed analysis and insights</p>
                    
                    <div class="upload-container" id="playStoreUpload" onclick="triggerFileInput('playStoreCsv')">
                        <div class="upload-icon">ðŸ“Š</div>
                        <div class="upload-text">Upload Your Play Store Reviews</div>
                        <p class="upload-description">Drag & drop your CSV file or click to browse</p>
                        <label class="upload-button">
                            Choose File
                            <input type="file" id="playStoreCsv" class="file-input" accept=".csv" onchange="handleFileSelect(this, 'playStore')">
                        </label>
                        <div id="playStoreFileInfo" class="file-info"></div>
                        <div id="playStoreProgress" class="progress-container">
                            <progress value="0" max="100"></progress>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <div class="input-group">
                                <label for="playStoreStartDate">Start Date (Optional)</label>
                                <input type="date" id="playStoreStartDate">
                            </div>
                        </div>
                        
                        <div class="col">
                            <div class="input-group">
                                <label for="playStoreEndDate">End Date (Optional)</label>
                                <input type="date" id="playStoreEndDate">
                            </div>
                        </div>
                    </div>
                    
                    <button id="analyzePlayStoreButton" onclick="analyzePlayStoreReviews()" disabled>Analyze Reviews</button>
                </div>
                
                <!-- App Store Tab Content -->
                <div id="appStore" class="tab-content">
                    <div class="tab-title">Analyze App Store Reviews</div>
                    <p class="tab-description">Export your reviews CSV from App Store Connect and upload it here for comprehensive analysis</p>
                    
                    <div class="upload-container" id="appStoreUpload" onclick="triggerFileInput('appStoreCsv')">
                        <div class="upload-icon">ðŸ“Š</div>
                        <div class="upload-text">Upload Your App Store Reviews</div>
                        <p class="upload-description">Drag & drop your CSV file or click to browse</p>
                        <label class="upload-button">
                            Choose File
                            <input type="file" id="appStoreCsv" class="file-input" accept=".csv" onchange="handleFileSelect(this, 'appStore')">
                        </label>
                        <div id="appStoreFileInfo" class="file-info"></div>
                        <div id="appStoreProgress" class="progress-container">
                            <progress value="0" max="100"></progress>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col">
                            <div class="input-group">
                                <label for="appStoreStartDate">Start Date (Optional)</label>
                                <input type="date" id="appStoreStartDate">
                            </div>
                        </div>
                        
                        <div class="col">
                            <div class="input-group">
                                <label for="appStoreEndDate">End Date (Optional)</label>
                                <input type="date" id="appStoreEndDate">
                            </div>
                        </div>
                    </div>
                    
                    <button id="analyzeAppStoreButton" onclick="analyzeAppStoreReviews()" disabled>Analyze Reviews</button>
                </div>
            </div>
            
            <!-- Results container -->
            <div id="resultsContainer" class="results-container">
                <!-- Results will be populated here dynamically -->
            </div>
            
            <a href="index.html" class="back-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Back to EMI Calculator
            </a>
        </div>
    </div>
    
    <div class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">Financial Tools</div>
                <p class="footer-text">A collection of useful financial and analytics tools designed to help you make better decisions.</p>
                <div class="social-links">
                    <a href="#" class="social-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 2H15C13.6739 2 12.4021 2.52678 11.4645 3.46447C10.5268 4.40215 10 5.67392 10 7V10H7V14H10V22H14V14H17L18 10H14V7C14 6.73478 14.1054 6.48043 14.2929 6.29289C14.4804 6.10536 14.7348 6 15 6H18V2Z" fill="white"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23 3.00005C22.0424 3.67552 20.9821 4.19216 19.86 4.53005C19.2577 3.83756 18.4573 3.34674 17.567 3.12397C16.6767 2.90121 15.7395 2.95724 14.8821 3.2845C14.0247 3.61176 13.2884 4.19445 12.773 4.95376C12.2575 5.71308 11.9877 6.61238 12 7.53005V8.53005C10.2426 8.57561 8.50127 8.18586 6.93101 7.39549C5.36074 6.60513 4.01032 5.43868 3 4.00005C3 4.00005 -1 13 8 17C5.94053 18.398 3.48716 19.099 1 19C10 24 21 19 21 7.50005C20.9991 7.2215 20.9723 6.94364 20.92 6.67005C21.9406 5.66354 22.6608 4.39276 23 3.00005Z" fill="white"/>
                        </svg>
                    </a>
                    <a href="#" class="social-link">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 8C17.5913 8 19.1174 8.63214 20.2426 9.75736C21.3679 10.8826 22 12.4087 22 14V21H18V14C18 13.4696 17.7893 12.9609 17.4142 12.5858C17.0391 12.2107 16.5304 12 16 12C15.4696 12 14.9609 12.2107 14.5858 12.5858C14.2107 12.9609 14 13.4696 14 14V21H10V14C10 12.4087 10.6321 10.8826 11.7574 9.75736C12.8826 8.63214 14.4087 8 16 8Z" fill="white"/>
                            <path d="M6 9H2V21H6V9Z" fill="white"/>
                            <path d="M4 6C5.10457 6 6 5.10457 6 4C6 2.89543 5.10457 2 4 2C2.89543 2 2 2.89543 2 4C2 5.10457 2.89543 6 4 6Z" fill="white"/>
                        </svg>
                    </a>
                </div>
                <p class="copyright">Â© 2023 Financial Tools. All rights reserved.</p>
            </div>
        </div>
    </div>

    <script>
        // Set default date values (last 30 days)
        window.onload = function() {
            const today = new Date();
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(today.getDate() - 30);
            
            const dateInputs = ['playStoreStartDate', 'playStoreEndDate', 'appStoreStartDate', 'appStoreEndDate'];
            dateInputs.forEach(id => {
                const input = document.getElementById(id);
                if (id.includes('End')) {
                    input.valueAsDate = today;
                } else {
                    input.valueAsDate = thirtyDaysAgo;
                }
            });
            
            // Setup drag and drop
            setupDragDrop('playStoreUpload', 'playStoreCsv', 'playStore');
            setupDragDrop('appStoreUpload', 'appStoreCsv', 'appStore');
        };
        
        // Global variables to store uploaded data
        let playStoreData = [];
        let appStoreData = [];
        
        function switchTab(tabId) {
            // Hide all tabs and remove active class
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab and add active class
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
        }
        
        function triggerFileInput(inputId) {
            document.getElementById(inputId).click();
        }
        
        function setupDragDrop(dropzoneId, fileInputId, storeType) {
            const dropzone = document.getElementById(dropzoneId);
            
            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            // Highlight drop zone when item is dragged over it
            ['dragenter', 'dragover'].forEach(eventName => {
                dropzone.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropzone.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropzone.style.borderColor = 'var(--secondary)';
                dropzone.style.backgroundColor = 'rgba(255, 101, 54, 0.05)';
            }
            
            function unhighlight() {
                dropzone.style.borderColor = 'var(--border-gray)';
                dropzone.style.backgroundColor = 'var(--light-gray)';
            }
            
            // Handle dropped files
            dropzone.addEventListener('drop', function(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length) {
                    const fileInput = document.getElementById(fileInputId);
                    fileInput.files = files;
                    handleFileSelect(fileInput, storeType);
                }
            }, false);
        }
        
        function handleFileSelect(fileInput, storeType) {
            if (!fileInput.files || !fileInput.files.length) return;
            
            const file = fileInput.files[0];
            if (file.type !== 'text/csv' && !file.name.endsWith('.csv')) {
                alert('Please upload a CSV file');
                return;
            }
            
            // Update file info
            const fileInfoElement = document.getElementById(`${storeType}FileInfo`);
            fileInfoElement.textContent = `${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
            
            // Show progress
            const progressContainer = document.getElementById(`${storeType}Progress`);
            progressContainer.style.display = 'block';
            
            // Enable analyze button
            document.getElementById(`analyze${storeType.charAt(0).toUpperCase() + storeType.slice(1)}Button`).disabled = false;
            
            // Read and parse the file
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const csvData = e.target.result;
                
                // Parse CSV data
                if (storeType === 'playStore') {
                    playStoreData = parsePlayStoreCSV(csvData);
                } else {
                    appStoreData = parseAppStoreCSV(csvData);
                }
                
                // Update progress to 100%
                const progressBar = progressContainer.querySelector('progress');
                progressBar.value = 100;
            };
            
            reader.onprogress = function(e) {
                if (e.lengthComputable) {
                    const progressBar = progressContainer.querySelector('progress');
                    progressBar.value = (e.loaded / e.total) * 100;
                }
            };
            
            reader.readAsText(file);
        }
        
        function parsePlayStoreCSV(csvData) {
            // For demo purposes, we'll generate simulated data
            // In a real implementation, this would parse the actual CSV
            
            // Generate between 50-100 random reviews
            const numReviews = Math.floor(Math.random() * 51) + 50;
            const reviews = [];
            
            const possibleReviews = [
                "Great app! Very user friendly and loads fast. Would be great if they added fingerprint login for easier access.",
                "The app is okay but crashes sometimes when I try to complete a payment. Customer support is responsive though.",
                "App keeps crashing every time I try to log in. Payment system is not working properly. Very frustrating!",
                "Love this app. It's made managing my finances so much easier. Highly recommend!",
                "Can't even create an account. Keeps giving me an error message. Fix this please!",
                "The new update is terrible. Now everything loads slowly and the UI is confusing.",
                "App works perfectly. No issues at all. Clean interface and intuitive design.",
                "Needs dark mode! Otherwise it's a great app with lots of useful features.",
                "I would give zero stars if I could. The app deleted all my saved data after the update.",
                "Very useful tool for planning my budget. Would like to see more chart options though.",
                "The calculator feature is super helpful. Just wish it had more loan types available.",
                "Too many bugs in the latest version. Going back to using the website instead.",
                "Customer service is excellent. Had an issue and they resolved it within hours.",
                "Love the clean design but please add the ability to export data to Excel.",
                "App crashes whenever I try to use the calculator function. Please fix!"
            ];
            
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - 90); // Reviews from last 90 days
            
            for (let i = 0; i < numReviews; i++) {
                const reviewIndex = Math.floor(Math.random() * possibleReviews.length);
                const ratingValue = Math.floor(Math.random() * 5) + 1; // Random rating 1-5
                
                // Generate random date within last 90 days
                const reviewDate = new Date(startDate);
                reviewDate.setDate(reviewDate.getDate() + Math.floor(Math.random() * 90));
                
                reviews.push({
                    text: possibleReviews[reviewIndex],
                    rating: ratingValue,
                    date: reviewDate.toISOString().split('T')[0],
                    user: `User ${i+1}`
                });
            }
            
            return reviews;
        }
        
        function parseAppStoreCSV(csvData) {
            // Similar simulated data for App Store
            const numReviews = Math.floor(Math.random() * 51) + 50;
            const reviews = [];
            
            const possibleReviews = [
                "Love this app! So easy to use and much better than their website. The UI is great and intuitive.",
                "App works fine but loads slowly sometimes. Would be great if they added a dark mode option.",
                "Missing several features from the website. Payment feature doesn't work properly. Disappointing!",
                "Very clean interface and easy to navigate. Definitely recommend for managing finances.",
                "The app keeps logging me out every few minutes. Very annoying!",
                "Great concept but execution is lacking. Needs more features to be truly useful.",
                "Perfect for what I need. Simple, fast, and accurate calculations.",
                "Latest update broke the loan calculator. Please fix it soon!",
                "I use this app daily and it's become an essential tool for me. Thank you devs!",
                "Would like to see more customization options for the dashboard.",
                "Crashes on my iPhone 12. Had to uninstall and reinstall to get it working.",
                "Unable to save my settings. They reset every time I close the app.",
                "The best financial app I've used. Clear, concise, and very helpful.",
                "Need more loan types and better explanation of the calculation methods.",
                "Can't believe this app is free! So many useful features for financial planning."
            ];
            
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - 90);
            
            for (let i = 0; i < numReviews; i++) {
                const reviewIndex = Math.floor(Math.random() * possibleReviews.length);
                const ratingValue = Math.floor(Math.random() * 5) + 1;
                
                const reviewDate = new Date(startDate);
                reviewDate.setDate(reviewDate.getDate() + Math.floor(Math.random() * 90));
                
                reviews.push({
                    text: possibleReviews[reviewIndex],
                    rating: ratingValue,
                    date: reviewDate.toISOString().split('T')[0],
                    user: `App User ${i+1}`
                });
            }
            
            return reviews;
        }
        
        function analyzePlayStoreReviews() {
            if (playStoreData.length === 0) {
                // Generate demo data for testing
                playStoreData = parsePlayStoreCSV(null);
            }
            
            // Filter by date if specified
            const startDate = document.getElementById('playStoreStartDate').valueAsDate;
            const endDate = document.getElementById('playStoreEndDate').valueAsDate;
            
            let filteredData = playStoreData;
            if (startDate && endDate) {
                filteredData = playStoreData.filter(review => {
                    const reviewDate = new Date(review.date);
                    return reviewDate >= startDate && reviewDate <= endDate;
                });
            }
            
            // Calculate sentiments based on ratings
            const sentiments = analyzeSentiments(filteredData);
            
            // Extract keywords from review text
            const keywords = extractKeywords(filteredData);
            
            // Display results
            displayResults('playStore', filteredData, sentiments, keywords);
        }
        
        function analyzeAppStoreReviews() {
            if (appStoreData.length === 0) {
                // Generate demo data for testing
                appStoreData = parseAppStoreCSV(null);
            }
            
            // Similar to analyzePlayStoreReviews
            const startDate = document.getElementById('appStoreStartDate').valueAsDate;
            const endDate = document.getElementById('appStoreEndDate').valueAsDate;
            
            let filteredData = appStoreData;
            if (startDate && endDate) {
                filteredData = appStoreData.filter(review => {
                    const reviewDate = new Date(review.date);
                    return reviewDate >= startDate && reviewDate <= endDate;
                });
            }
            
            const sentiments = analyzeSentiments(filteredData);
            const keywords = extractKeywords(filteredData);
            
            displayResults('appStore', filteredData, sentiments, keywords);
        }
        
        function analyzeSentiments(reviews) {
            // Simple sentiment analysis based on star ratings
            const sentiments = {
                positive: 0,
                neutral: 0,
                negative: 0,
                average: 0
            };
            
            let totalRating = 0;
            
            reviews.forEach(review => {
                totalRating += review.rating;
                
                if (review.rating >= 4) {
                    sentiments.positive++;
                } else if (review.rating === 3) {
                    sentiments.neutral++;
                } else {
                    sentiments.negative++;
                }
            });
            
            // Calculate percentages
            const total = reviews.length;
            if (total > 0) {
                sentiments.positive = Math.round((sentiments.positive / total) * 100);
                sentiments.neutral = Math.round((sentiments.neutral / total) * 100);
                sentiments.negative = Math.round((sentiments.negative / total) * 100);
                sentiments.average = totalRating / total;
            }
            
            return sentiments;
        }
        
        function extractKeywords(reviews) {
            // Common words to exclude
            const stopWords = new Set([
                'the', 'and', 'a', 'to', 'is', 'in', 'that', 'it', 'with', 'for', 'as', 
                'on', 'was', 'be', 'at', 'this', 'have', 'from', 'or', 'but', 'not', 'by',
                'an', 'are', 'they', 'you', 'i', 'of', 'my', 'app', 'has', 'can', 'so'
            ]);
            
            // Extract all words from reviews
            const wordCounts = {};
            const functionalPhrases = [];
            
            // Patterns to look for functional issues
            const functionalPatterns = [
                /crash(es|ed|ing)?/i,
                /bug(s|gy)?/i,
                /doesn't work/i,
                /not working/i,
                /add (a |an |the )?([a-z]+)/i,
                /need (a |an |the )?([a-z]+)/i,
                /missing ([a-z]+)/i,
                /can't ([a-z]+)/i,
                /error/i,
                /slow/i,
                /lag(s|gy|ging)?/i,
                /feature request/i,
                /payment (issue|problem)/i,
                /login (issue|problem)/i
            ];
            
            reviews.forEach(review => {
                if (!review.text) return;
                
                // Look for functional phrases
                functionalPatterns.forEach(pattern => {
                    const match = review.text.match(pattern);
                    if (match) {
                        let phrase = match[0].toLowerCase();
                        // Clean up the phrase
                        phrase = phrase.replace(/[^\w\s]/gi, '').trim();
                        
                        if (phrase && phrase.length > 3) {
                            const existingIndex = functionalPhrases.findIndex(p => p.text === phrase);
                            if (existingIndex >= 0) {
                                functionalPhrases[existingIndex].count++;
                            } else {
                                functionalPhrases.push({ text: phrase, count: 1 });
                            }
                        }
                    }
                });
                
                // Count all words
                const words = review.text.toLowerCase()
                    .replace(/[^\w\s]/gi, '')
                    .split(/\s+/);
                
                words.forEach(word => {
                    if (word && word.length > 3 && !stopWords.has(word)) {
                        wordCounts[word] = (wordCounts[word] || 0) + 1;
                    }
                });
            });
            
            // Convert to array and sort by count
            const keywordArray = Object.entries(wordCounts)
                .map(([text, count]) => ({ text, count }))
                .sort((a, b) => b.count - a.count)
                .slice(0, 10);
            
            // Combine functional phrases with top keywords
            const combined = [...functionalPhrases]
                .sort((a, b) => b.count - a.count)
                .slice(0, 15);
            
            // Add top keywords that aren't already covered by phrases
            keywordArray.forEach(keyword => {
                if (combined.length < 20 && !combined.some(p => p.text.includes(keyword.text))) {
                    combined.push(keyword);
                }
            });
            
            return combined.sort((a, b) => b.count - a.count);
        }
        
        function displayResults(storeType, reviews, sentiments, keywords) {
            // Create the results HTML
            const storeTitle = storeType === 'playStore' ? 'Google Play Store' : 'App Store';
            const storeIconClass = storeType === 'playStore' ? 'google-play-icon' : 'app-store-icon';
            
            // Create empty results container if it doesn't exist
            if (!document.getElementById('resultsContainer').innerHTML) {
                document.getElementById('resultsContainer').innerHTML = '';
            }
            
            // Create the store results section if it doesn't exist
            let storeResultsElement = document.getElementById(`${storeType}Results`);
            if (!storeResultsElement) {
                storeResultsElement = document.createElement('div');
                storeResultsElement.id = `${storeType}Results`;
                storeResultsElement.className = 'store-results';
                document.getElementById('resultsContainer').appendChild(storeResultsElement);
            }
            
            // Populate the results
            storeResultsElement.innerHTML = `
                <div class="store-header">
                    <div class="store-icon ${storeIconClass}"></div>
                    <h3>${storeTitle} Analysis</h3>
                </div>
                
                <div class="sentiment-box">
                    <div class="sentiment-card average-rating">
                        <div class="sentiment-title">Average Rating</div>
                        <div class="sentiment-value">${sentiments.average.toFixed(1)}</div>
                    </div>
                    <div class="sentiment-card positive-sentiment">
                        <div class="sentiment-title">Positive</div>
                        <div class="sentiment-value">${sentiments.positive}%</div>
                    </div>
                    <div class="sentiment-card neutral-sentiment">
                        <div class="sentiment-title">Neutral</div>
                        <div class="sentiment-value">${sentiments.neutral}%</div>
                    </div>
                    <div class="sentiment-card negative-sentiment">
                        <div class="sentiment-title">Negative</div>
                        <div class="sentiment-value">${sentiments.negative}%</div>
                    </div>
                </div>
                
                <div class="keywords-container">
                    <div class="keyword-title">Top Keywords & Functional Issues</div>
                    <div class="keywords-list">
                        ${keywords.map(keyword => `
                            <div class="keyword-tag">
                                ${keyword.text}
                                <span class="keyword-count">${keyword.count}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="review-sample">
                    <div class="review-title">Sample Reviews</div>
                    ${getSampleReviews(reviews)}
                </div>
            `;
            
            // Show results container
            document.getElementById('resultsContainer').style.display = 'block';
            document.getElementById('resultsContainer').scrollIntoView({ behavior: 'smooth' });
        }
        
        function getSampleReviews(reviews) {
            // Get a mix of positive, neutral, and negative reviews
            const positiveReviews = reviews.filter(review => review.rating >= 4).slice(0, 3);
            const neutralReviews = reviews.filter(review => review.rating === 3).slice(0, 2);
            const negativeReviews = reviews.filter(review => review.rating <= 2).slice(0, 3);
            
            // Combine and sort by recency
            const sampleReviews = [...positiveReviews, ...neutralReviews, ...negativeReviews]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);
            
            return sampleReviews.map(review => {
                let sentimentClass = 'review-neutral';
                if (review.rating >= 4) sentimentClass = 'review-positive';
                if (review.rating <= 2) sentimentClass = 'review-negative';
                
                return `
                    <div class="review-card ${sentimentClass}">
                        <div class="review-header">
                            <div class="reviewer-name">${review.user}</div>
                            <div class="review-date">${formatDate(review.date)}</div>
                        </div>
                        <div class="review-rating">
                            ${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5-review.rating)}
                        </div>
                        <div class="review-text">${review.text}</div>
                    </div>
                `;
            }).join('');
        }
        
        function formatDate(dateString) {
            // Handle various date formats
            try {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            } catch (e) {
                return dateString;
            }
        }
    </script>
</body>
</html>
